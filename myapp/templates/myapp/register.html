{% extends 'myapp/base1.html'%}
{% load static %}
{% block content %}
<section class="section-hero overlay inner-page bg-image" style="background-image: url('{% static 'images/hero_1.jpg' %}');" id="home-section">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-md-8 text-center">
                <h1 class="text-white font-weight-bold">Sign Up</h1>
                <div class="custom-breadcrumbs">
                    <a href="{% url 'home' %}">Home</a> <span class="mx-2 slash">/</span>
                    <span class="text-white"><strong>Register</strong></span>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="site-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="p-4 bg-white rounded shadow">
                    <h2 class="h4 text-black mb-4">Sign Up</h2>
                    
                    {% if msg %}
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        {{ msg }}
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                    </div>
                    {% endif %}
                    
                    <form action="{% url 'RegisterUser' %}" method="POST">
                        {% csrf_token %}
                        
                        <!-- Select Role Field -->
                        <div class="row form-group">
                            <div class="col-md-12 mb-3">
                                <label class="text-black" for="user_role">Select Role *</label>
                                <select class="form-control" id="user_role" name="role" onchange="toggleCompanyField()" required>
                                    <option value="">-- Select Role --</option>
                                    <option value="candidate">Job Seeker (Candidate)</option>
                                    <option value="company">Employer (Company)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Company Name Field (Only for Company) -->
                        <div class="row form-group" id="company_name_field" style="display: none;">
                            <div class="col-md-12 mb-3">
                                <label class="text-black" for="company_name">Company Name *</label>
                                <input type="text" id="company_name" class="form-control" placeholder="Enter Company Name" name="company_name">
                            </div>
                        </div>

                        <!-- First Name and Last Name fields -->
                        <div class="row form-group">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label class="text-black" for="first_name">First Name *</label>
                                <input type="text" id="first_name" class="form-control" placeholder="First Name" name="fname" required>
                            </div>
                            <div class="col-md-6">
                                <label class="text-black" for="last_name">Last Name *</label>
                                <input type="text" id="last_name" class="form-control" placeholder="Last Name" name="lname" required>
                            </div>
                        </div>

                        <!-- Email Address field -->
                        <div class="row form-group">
                            <div class="col-md-12 mb-3">
                                <label class="text-black" for="email">Your Email *</label>
                                <input type="email" id="email" class="form-control" placeholder="Enter your email" name="email" required>
                            </div>
                        </div>
                        
                        <!-- Password field -->
                        <div class="row form-group">
                            <div class="col-md-12 mb-3">
                                <label class="text-black" for="password">Password *</label>
                                <input type="password" id="password" class="form-control" placeholder="Enter password (min 6 characters)" name="password" required>
                            </div>
                        </div>
                        
                        <!-- Confirm Password field -->
                        <div class="row form-group">
                            <div class="col-md-12 mb-3">
                                <label class="text-black" for="confirm_password">Confirm Password *</label>
                                <input type="password" id="confirm_password" class="form-control" placeholder="Confirm your password" name="cpassword" required>
                            </div>
                        </div>

                        <!-- Register Button -->
                        <div class="row form-group mt-4">
                            <div class="col-md-12">
                                <input type="submit" value="Sign Up" class="btn btn-primary btn-md text-white btn-block">
                            </div>
                        </div>
                        
                        <div class="row form-group mt-3">
                            <div class="col-md-12 text-center">
                                <p>Already have an account? <a href="{% url 'login' %}" class="text-primary font-weight-bold">Log In</a></p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
function toggleCompanyField() {
    var role = document.getElementById('user_role').value;
    var companyField = document.getElementById('company_name_field');
    var companyInput = document.getElementById('company_name');
    
    if (role === 'company') {
        companyField.style.display = 'block';
        companyInput.required = true;
    } else {
        companyField.style.display = 'none';
        companyInput.required = false;
    }
}
</script>

{% endblock %}